{% extends 'base.html' %}

{% block header %}
    <h1 class="header-h1">{% block title %}Search{% endblock %}</h1>
{% endblock %}

{% block script %}
    <script src="{{ url_for('static', filename='search.js') }}"></script>
{% endblock %}

{% block content %}

    <section class="search">
        <div class="search-bar">
                <!-- preserve selection after re-rendering template:
            type selected before re-render passed from backend -->
            <label for="search-type" hidden>Select search type</label>
            <select name="search_type" id="search-type" form="search-form">
                <option value="all" {% if searchType == 'all' %}selected{% endif %}>All</option>
                <option value="name" {% if searchType == 'name' %}selected{% endif %}>Name</option>
                <option value="key_features" {% if searchType == 'key_features' %}selected{% endif %}>Features</option>
                <option value="key_applications" {% if searchType == 'key_applications' %}selected{% endif %}>
                    Applications
                </option>
                <option value="tags" {% if searchType == 'tags' %}selected{% endif %}>Tags</option>
            </select>
            <form method="post" id="search-form">
                <label for="search-box" hidden>Search</label>
                <input name="keywords" id="search-box" value="{{ keywords }}">
                <input type="submit" id="searchSubmit" value="Search">
            </form>
        </div>

        <div id="suggestions"></div>
    </section>



    <section>
        {% if results %}
            {% for result in results %}
                <div>
                    <ul>
                        <li><a href="{{ url_for('search.document', obj_id=result['_id']) }}">
                            {{ result['name'] }}
                        </a></li>
                    </ul>
                </div>
            {% endfor %}
        {% else %}
            <div>No result found</div>
        {% endif %}


    </section>
{% endblock %}