{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}Edit{% endblock %}</h1>
{% endblock %}

{% block script %}
<script src="{{ url_for('static', filename='edit.js') }}"></script>
{% endblock %}




{% block content %}
<form action="/edit/{{ obj_id }}" method="post">

    <div id="editFields">
        {% if obj_id == 'new' %}
        Name:
        <input type="text" name="name">
        <br>
        <div id="editField1">
            <input class="field" type="text" name="key1">:
            <input class="field" type="text" name="value1">
            <button class="delFieldButton" type="button" id="delField1">x</button>
            <br>
        </div>
        <div id="editField2">
            <input class="field" type="text" name="key2">:
            <input class="field" type="text" name="value2">
            <button class="delFieldButton" type="button" id="delField2">x</button>
            <br>
        </div>
        <div id="editField3">
            <input class="field" type="text" name="key3">:
            <input class="field" type="text" name="value3">
            <button class="delFieldButton" type="button" id="delField3">x</button>
            <br>
        </div>
        {% else %}
        Name:
        <input type="text" name="name" value="{{ result['name'] }}">

        {% for key_value in result['data'] %}
        <div id="editField{{ loop.index }}">
            <input class="field" type="text" name="key{{ loop.index }}" value="{{ key_value[0] }}">:
            <input class="field" type="text" name="value{{ loop.index }}" value="{{ key_value[1] }}">
            <button class="delFieldButton" type="button" id="delField{{ loop.index }}">x</button>
            <br>
        </div>
        {% endfor %}
        {% endif %}
    </div>
    <br>

    <button type="button" id="addField">Add Field</button>
    <input type="submit" id="submitField" value="submit">
</form>
{% endblock %}